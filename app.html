<!DOCTYPE html>
<html lang="de-CH">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tender Scout - App</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="container navbar-container">
            <!-- Logo -->
            <div class="navbar-logo" onclick="window.location.href='index.html'">
                <div class="navbar-logo-icon">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/>
                        <polyline points="14,2 14,8 20,8"/>
                    </svg>
                </div>
                <span>Tender Scout</span>
            </div>

            <!-- Center Nav Links (Auth) -->
            <div id="nav-links-auth" class="navbar-center">
                <button class="nav-link" data-goto="dashboard">Dashboard</button>
                <button class="nav-link" onclick="navigateTo('settings')">Einstellungen</button>
            </div>

            <!-- Right Actions -->
            <div class="navbar-actions">
                <!-- Theme Toggle -->
                <button class="theme-toggle" onclick="toggleTheme()" title="Dunkelmodus umschalten" aria-label="Dunkelmodus umschalten">
                    <svg class="theme-icon-light" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                    <svg class="theme-icon-dark" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
                <!-- Language Dropdown -->
                <div class="lang-dropdown">
                    <button class="lang-dropdown-btn" onclick="toggleLangDropdown()">
                        <span class="lang-current">DE</span>
                        <svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polyline points="6 9 12 15 18 9"/>
                        </svg>
                    </button>
                    <div class="lang-dropdown-menu" id="lang-menu">
                        <button class="lang-option is-active" onclick="selectLang('DE')">
                            <span class="lang-code">DE</span> Deutsch
                        </button>
                        <button class="lang-option" onclick="selectLang('FR')">
                            <span class="lang-code">FR</span> Français
                        </button>
                        <button class="lang-option" onclick="selectLang('IT')">
                            <span class="lang-code">IT</span> Italiano
                        </button>
                        <button class="lang-option" onclick="selectLang('EN')">
                            <span class="lang-code">EN</span> English
                        </button>
                    </div>
                </div>
                <!-- CTA: Abmelden -->
                <div id="nav-cta-auth">
                    <button class="btn btn-ghost btn-sm" onclick="logout()">Abmelden</button>
                </div>
                <!-- Mobile Theme Toggle -->
                <button class="mobile-theme-toggle" onclick="toggleTheme()" title="Dunkelmodus umschalten" aria-label="Dunkelmodus umschalten">
                    <svg class="theme-icon-light" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"/>
                        <line x1="12" y1="1" x2="12" y2="3"/>
                        <line x1="12" y1="21" x2="12" y2="23"/>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/>
                        <line x1="1" y1="12" x2="3" y2="12"/>
                        <line x1="21" y1="12" x2="23" y2="12"/>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
                    </svg>
                    <svg class="theme-icon-dark" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
                    </svg>
                </button>
                <!-- Mobile Menu Toggle -->
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()" aria-label="Menü öffnen">
                    <svg class="menu-icon-open" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="3" y1="6" x2="21" y2="6"/>
                        <line x1="3" y1="12" x2="21" y2="12"/>
                        <line x1="3" y1="18" x2="21" y2="18"/>
                    </svg>
                    <svg class="menu-icon-close" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <line x1="18" y1="6" x2="6" y2="18"/>
                        <line x1="6" y1="6" x2="18" y2="18"/>
                    </svg>
                </button>
            </div>
        </div>
    </nav>

    <!-- Mobile Menu Drawer -->
    <div class="mobile-menu-backdrop" onclick="toggleMobileMenu()"></div>
    <div class="mobile-menu">
        <!-- User Profile Section -->
        <div id="mobile-menu-profile" class="mobile-menu-profile">
            <div class="mobile-menu-avatar">AB</div>
            <div class="mobile-menu-user-info">
                <span class="mobile-menu-user-name">Anna Beispiel</span>
                <span class="mobile-menu-user-email">anna@firma.ch</span>
                <span class="mobile-menu-user-plan">Professional Plan</span>
            </div>
        </div>

        <nav class="mobile-menu-nav">
            <!-- Auth Links -->
            <div id="mobile-nav-auth" class="mobile-menu-links">
                <button class="mobile-menu-link" data-goto="dashboard" onclick="toggleMobileMenu()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <rect x="3" y="3" width="7" height="7"/>
                        <rect x="14" y="3" width="7" height="7"/>
                        <rect x="14" y="14" width="7" height="7"/>
                        <rect x="3" y="14" width="7" height="7"/>
                    </svg>
                    Dashboard
                </button>
                <button class="mobile-menu-link" onclick="navigateTo('settings'); toggleMobileMenu()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                    Einstellungen
                </button>
            </div>

            <!-- Logout -->
            <div id="mobile-nav-logout" class="mobile-menu-section">
                <button class="mobile-menu-link mobile-menu-link-muted" onclick="logout(); toggleMobileMenu()">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
                        <polyline points="16 17 21 12 16 7"/>
                        <line x1="21" y1="12" x2="9" y2="12"/>
                    </svg>
                    Abmelden
                </button>
            </div>

            <!-- Language Selection -->
            <div id="mobile-nav-lang" class="mobile-menu-section">
                <div class="mobile-menu-pref-section">
                    <span class="mobile-menu-pref-label">Sprache</span>
                    <div class="mobile-menu-pref-list">
                        <button class="mobile-menu-pref-option is-active" onclick="selectLang('DE'); updateMobileLangSelection('DE')" data-lang="DE">
                            <span class="mobile-menu-pref-radio"></span>
                            Deutsch
                        </button>
                        <button class="mobile-menu-pref-option" onclick="selectLang('FR'); updateMobileLangSelection('FR')" data-lang="FR">
                            <span class="mobile-menu-pref-radio"></span>
                            Français
                        </button>
                        <button class="mobile-menu-pref-option" onclick="selectLang('IT'); updateMobileLangSelection('IT')" data-lang="IT">
                            <span class="mobile-menu-pref-radio"></span>
                            Italiano
                        </button>
                        <button class="mobile-menu-pref-option" onclick="selectLang('EN'); updateMobileLangSelection('EN')" data-lang="EN">
                            <span class="mobile-menu-pref-radio"></span>
                            English
                        </button>
                    </div>
                </div>
            </div>
        </nav>
    </div>

    <!-- VIEWS -->

    <!-- Profile Selection View -->
    <div id="view-profile-selection" class="view view--centered active">
        <div class="container container--narrow">
            <div class="text-center mb-8">
                <h2 class="text-h1">Suchprofile</h2>
                <p class="text-secondary">Wählen Sie ein Profil oder erstellen Sie ein neues.</p>
            </div>

            <div id="profile-list" class="flex flex-col gap-4">
                <!-- Profiles injected by JS -->
            </div>

            <button class="btn btn-lg btn-secondary w-full mt-4 border-dashed" onclick="navigateTo('company-search')">
                + Neues Suchprofil erstellen
            </button>
        </div>
    </div>

    <!-- Company Search View -->
    <div id="view-company-search" class="view view--centered">
        <div class="container container--narrow pt-12 pb-12">
            <div class="wizard-steps">
                <div class="step-dot active"></div>
                <div class="step-dot"></div>
                <div class="step-dot"></div>
            </div>

            <div class="text-center mb-8">
                <h2 class="text-h1">Unternehmen finden</h2>
                <p class="text-secondary">Wir analysieren Ihr Firmenprofil automatisch.</p>
            </div>

            <div class="card">
                <div class="form-group">
                    <label class="form-label">Firmenname oder UID</label>
                    <input type="text" id="company-search-input" class="input" placeholder="z.B. Müller Bau..."
                        autofocus>
                    <div class="mt-2 text-xs text-secondary">
                        Demo-Unternehmen:
                        <span class="badge badge-gray cursor-pointer" onclick="setSearch('Müller')">Müller</span>
                        <span class="badge badge-gray cursor-pointer" onclick="setSearch('Tech')">Tech</span>
                        <span class="badge badge-gray cursor-pointer" onclick="setSearch('Green')">Green</span>
                        <span class="badge badge-gray cursor-pointer" onclick="setSearch('Alpha')">Alpha</span>
                    </div>
                </div>

                <div id="company-search-results" class="flex flex-col gap-2">
                    <!-- Results injected by JS -->
                </div>

                <div class="text-center text-sm text-muted mt-6">
                    Firma nicht gefunden? <a href="#" class="text-accent" onclick="navigateTo('manual-entry'); return false;">Manuell eingeben</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Manual Entry View -->
    <div id="view-manual-entry" class="view view--centered">
        <div class="container container--narrow pt-12 pb-12">
            <div class="wizard-steps">
                <div class="step-dot active"></div>
                <div class="step-dot"></div>
                <div class="step-dot"></div>
            </div>

            <div class="text-center mb-8">
                <h2 class="text-h1">Firma manuell erfassen</h2>
                <p class="text-secondary">Geben Sie die Details Ihrer Firma ein.</p>
            </div>

            <div class="card">
                <div class="settings-form-grid">
                    <div class="form-group">
                        <label class="form-label">Firmenname *</label>
                        <input type="text" id="manual-name" class="input" placeholder="Meine Firma AG">
                    </div>
                    <div class="form-group">
                        <label class="form-label">UID-Nummer (optional)</label>
                        <input type="text" class="input" placeholder="CHE-123.456.789">
                    </div>
                </div>
                <div class="settings-form-grid">
                    <div class="form-group">
                        <label class="form-label">Stadt *</label>
                        <input type="text" id="manual-city" class="input" placeholder="Zürich">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Branche</label>
                        <select class="input">
                            <option value="">Bitte wählen...</option>
                            <option>Baugewerbe / Hochbau</option>
                            <option>Baugewerbe / Tiefbau</option>
                            <option>IT-Dienstleistungen</option>
                            <option>Gartenbau & Landschaftspflege</option>
                            <option>Sicherheitsdienste</option>
                            <option>Andere</option>
                        </select>
                    </div>
                </div>

                <div class="flex gap-3 mt-6">
                    <button class="btn btn-secondary" onclick="navigateTo('company-search')">Zurück</button>
                    <button class="btn btn-primary flex-1" onclick="submitManualEntry()">Weiter zur KI-Analyse</button>
                </div>
            </div>
        </div>
    </div>

    <!-- AI Review View -->
    <div id="view-ai-review" class="view">
        <!-- AI Loading Overlay -->
        <div id="ai-loading-overlay" class="flex flex-col items-center justify-center hidden h-60vh">
            <div class="conveyor-bars"></div>
            <div class="text-h3 mt-8 text-accent" id="ai-loading-text">Zefix wird durchsucht...</div>
            <div class="text-sm text-secondary mt-2">Bitte warten, während wir Ihr Profil erstellen</div>
        </div>

        <div id="ai-results-content" class="container container--narrow pt-12 pb-12 hidden">
            <div class="wizard-steps">
                <div class="step-dot completed"></div>
                <div class="step-dot active"></div>
                <div class="step-dot"></div>
            </div>

            <div class="text-center mb-8">
                <div class="badge badge-blue mb-2">KI-Analyse abgeschlossen</div>
                <h2 class="text-h1">Ist das Ihr Profil?</h2>
                <p class="text-secondary">Basierend auf <strong id="ai-company-name">...</strong></p>
            </div>

            <div class="flex flex-col gap-4">
                <!-- Industry -->
                <div class="card">
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-sm text-muted">Branche</div>
                        <button class="btn btn-sm btn-ghost text-accent"
                            onclick="openEditModal('industry')">Ändern</button>
                    </div>
                    <div id="ai-industry" class="text-h3">Baugewerbe / Hochbau</div>
                </div>

                <!-- Company Size -->
                <div class="card">
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-sm text-muted">Unternehmensgrösse</div>
                        <button class="btn btn-sm btn-ghost text-accent" onclick="openEditModal('size')">Ändern</button>
                    </div>
                    <div id="ai-size" class="text-h3">10-49 Mitarbeitende</div>
                </div>

                <!-- Keywords -->
                <div class="card">
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-sm text-muted">Keywords (Suche / Ausschluss)</div>
                        <button class="btn btn-sm btn-ghost text-accent"
                            onclick="openEditModal('keywords')">Ändern</button>
                    </div>
                    <div id="ai-keywords" class="flex flex-wrap gap-2">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- CPV Codes -->
                <div class="card">
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-sm text-muted">Empfohlene CPV-Codes</div>
                        <button class="btn btn-sm btn-ghost text-accent" onclick="openEditModal('cpv')">Ändern</button>
                    </div>
                    <div id="ai-cpv-codes" class="flex flex-col gap-2">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- NPK Codes (Conditional) -->
                <div id="ai-npk-section" class="card" style="display: none;">
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-sm text-muted">NPK-Codes (Bau)</div>
                        <button class="btn btn-sm btn-ghost text-accent" onclick="openEditModal('npk')">Ändern</button>
                    </div>
                    <div id="ai-npk-codes" class="flex flex-col gap-2">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Region -->
                <div class="card">
                    <div class="flex justify-between items-center mb-2">
                        <div class="text-sm text-muted">Region</div>
                        <button class="btn btn-sm btn-ghost text-accent"
                            onclick="openEditModal('region')">Ändern</button>
                    </div>
                    <div id="ai-region" class="text-h3">Zürich, Aargau, Zug</div>
                </div>

                <button class="btn btn-lg btn-primary mt-4" onclick="navigateTo('dashboard')">
                    Profil bestätigen & Matches anzeigen
                </button>
            </div>
        </div>
    </div>

    <!-- Dashboard View -->
    <div id="view-dashboard" class="view">
        <div class="container pt-8 pb-8">
            <!-- Breadcrumb -->
            <nav class="breadcrumb" aria-label="Breadcrumb">
                <span class="breadcrumb-item is-clickable" onclick="navigateTo('profile-selection')">Meine Profile</span>
                <span class="breadcrumb-separator">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"/>
                    </svg>
                </span>
                <span class="breadcrumb-item is-current">Müller Bau AG</span>
            </nav>

            <div class="flex justify-between items-center mb-6">
                <h2 class="text-h2">Ausschreibungen</h2>
                <button class="btn btn-sm btn-secondary" onclick="openProfileSettings()">
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                    Suchprofil
                </button>
            </div>

            <div id="filter-tabs" class="flex justify-between items-center gap-2 mb-6">
                <div class="flex gap-2 overflow-x-auto pb-1">
                    <button class="btn btn-sm btn-primary" data-filter="all" onclick="filterTenders('all')"><span>Alle (<span id="count-all">0</span>)</span></button>
                    <button class="btn btn-sm btn-ghost" data-filter="open" onclick="filterTenders('open')"><span>Offen (<span id="count-open">0</span>)</span></button>
                    <button class="btn btn-sm btn-ghost" data-filter="closing" onclick="filterTenders('closing')"><span>Bald fällig (<span id="count-closing">0</span>)</span></button>
                    <button class="btn btn-sm btn-ghost" data-filter="bookmarked" onclick="filterTenders('bookmarked')"><span>Gemerkt (<span id="count-bookmarked">0</span>)</span></button>
                    <button class="btn btn-sm btn-ghost" data-filter="applied" onclick="filterTenders('applied')"><span>Beworben (<span id="count-applied">0</span>)</span></button>
                    <button class="btn btn-sm btn-ghost" data-filter="hidden" onclick="filterTenders('hidden')"><span>Ausgeblendet (<span id="count-hidden">0</span>)</span></button>
                </div>
                <div class="flex gap-2 flex-shrink-0">
                    <button class="btn btn-sm btn-secondary" onclick="toggleModal('filter', true)">
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <polygon points="22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"/>
                        </svg>
                        Filter
                    </button>
                    <div class="sort-dropdown">
                        <button class="btn btn-sm btn-secondary" onclick="toggleSortDropdown()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m3 16 4 4 4-4"/>
                                <path d="M7 20V4"/>
                                <path d="m21 8-4-4-4 4"/>
                                <path d="M17 4v16"/>
                            </svg>
                            <span id="sort-label">Match</span>
                        </button>
                        <div class="sort-dropdown-menu" id="sort-menu">
                            <button class="sort-option is-active" onclick="sortTenders('match')">Match %</button>
                            <button class="sort-option" onclick="sortTenders('deadline')">Frist</button>
                            <button class="sort-option" onclick="sortTenders('title')">Titel A-Z</button>
                            <button class="sort-option" onclick="sortTenders('price')">Auftragswert</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="tender-feed" class="tender-grid">
                <!-- Feed injected by JS -->
            </div>
        </div>
    </div>

    <!-- Tender Detail View -->
    <div id="view-tender-detail" class="view">
        <div class="container pt-8 pb-8">
            <nav id="tender-detail-breadcrumbs" class="breadcrumb" aria-label="Breadcrumb">
                <!-- Injected via JS -->
            </nav>

            <div class="card" id="tender-detail-content">
                <!-- Content injected by JS -->
            </div>
        </div>
    </div>

    <!-- Settings View -->
    <div id="view-settings" class="view">
        <div class="container container--wide pt-8 pb-8">
            <nav class="breadcrumb" aria-label="Breadcrumb">
                <span class="breadcrumb-item is-clickable" onclick="navigateTo('profile-selection')">Meine Profile</span>
                <span class="breadcrumb-separator">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="9 18 15 12 9 6"/>
                    </svg>
                </span>
                <span class="breadcrumb-item is-current">Einstellungen</span>
            </nav>

            <h1 class="text-h1 mb-8">Einstellungen</h1>

            <div class="settings-layout">
                <!-- Sidebar Navigation -->
                <div class="settings-nav card">
                    <button class="settings-nav-item is-active" onclick="showSettingsTab('billing')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="20" height="14" x="2" y="5" rx="2"/>
                            <line x1="2" x2="22" y1="10" y2="10"/>
                        </svg>
                        Abo & Zahlungen
                    </button>
                    <button class="settings-nav-item" onclick="showSettingsTab('profile')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/>
                            <circle cx="12" cy="7" r="4"/>
                        </svg>
                        Kontodaten
                    </button>
                    <button class="settings-nav-item" onclick="showSettingsTab('notifications')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9"/>
                            <path d="M10.3 21a1.94 1.94 0 0 0 3.4 0"/>
                        </svg>
                        Benachrichtigungen
                    </button>
                    <button class="settings-nav-item" onclick="showSettingsTab('team')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M22 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                        Team verwalten
                    </button>
                    <button class="settings-nav-item" onclick="showSettingsTab('security')">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <rect width="18" height="11" x="3" y="11" rx="2" ry="2"/>
                            <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
                        </svg>
                        Sicherheit & Konto
                    </button>
                </div>

                <!-- Content Panels -->
                <div class="settings-content">
                    <!-- Billing Tab -->
                    <div id="settings-billing" class="settings-panel is-active">
                        <div class="card">
                            <div class="flex justify-between items-start mb-4">
                                <div>
                                    <h3 class="text-h3 mb-1">Ihr Plan: Professional</h3>
                                    <p class="text-secondary text-sm">Nächste Abrechnung am 01.02.2026</p>
                                </div>
                                <span class="badge badge-green">Aktiv</span>
                            </div>
                            <div class="price-display">CHF 49.<span class="price-period">/Monat</span></div>
                            <div class="flex gap-3 mt-6">
                                <button class="btn btn-secondary btn-sm">Plan kündigen</button>
                                <button class="btn btn-primary btn-sm">Upgrade auf Enterprise</button>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="text-h3 mb-4">Zahlungsmethode</h3>
                            <div class="settings-payment-card">
                                <div class="flex items-center gap-4">
                                    <div class="settings-card-icon">
                                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                            <rect width="20" height="14" x="2" y="5" rx="2"/>
                                            <line x1="2" x2="22" y1="10" y2="10"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <div class="font-medium">•••• •••• •••• 4242</div>
                                        <div class="text-xs text-secondary">Visa • Verfällt 12/28</div>
                                    </div>
                                </div>
                                <button class="btn btn-ghost btn-sm">Bearbeiten</button>
                            </div>
                            <button class="btn btn-ghost text-accent mt-3 pl-0">+ Neue Karte hinzufügen</button>
                        </div>

                        <div class="card">
                            <h3 class="text-h3 mb-4">Rechnungen</h3>
                            <div class="settings-invoice-list">
                                <div class="settings-invoice-item">
                                    <div>
                                        <div class="font-medium">Januar 2026</div>
                                        <div class="text-xs text-secondary">01.01.2026 • #INV-2026-001</div>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <span class="text-sm font-medium">CHF 49.00</span>
                                        <button class="btn btn-ghost btn-sm text-accent">PDF</button>
                                    </div>
                                </div>
                                <div class="settings-invoice-item">
                                    <div>
                                        <div class="font-medium">Dezember 2025</div>
                                        <div class="text-xs text-secondary">01.12.2025 • #INV-2025-012</div>
                                    </div>
                                    <div class="flex items-center gap-4">
                                        <span class="text-sm font-medium">CHF 49.00</span>
                                        <button class="btn btn-ghost btn-sm text-accent">PDF</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Profile Tab -->
                    <div id="settings-profile" class="settings-panel">
                        <div class="card">
                            <h3 class="text-h3 mb-6">Firmenprofil</h3>
                            <div class="settings-form-grid">
                                <div class="form-group">
                                    <label class="form-label">Firmenname</label>
                                    <input type="text" class="input" value="Müller Bau AG" />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">UID-Nummer</label>
                                    <input type="text" class="input" value="CHE-123.456.789" disabled />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Branche</label>
                                    <select class="input">
                                        <option selected>Baugewerbe / Hochbau</option>
                                        <option>Baugewerbe / Tiefbau</option>
                                        <option>IT-Dienstleistungen</option>
                                        <option>Gartenbau</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Unternehmensgrösse</label>
                                    <select class="input">
                                        <option>1-9 Mitarbeitende</option>
                                        <option selected>10-49 Mitarbeitende</option>
                                        <option>50-249 Mitarbeitende</option>
                                        <option>250+ Mitarbeitende</option>
                                    </select>
                                </div>
                            </div>
                            <div class="form-group mt-4">
                                <label class="form-label">Adresse</label>
                                <input type="text" class="input" value="Bahnhofstrasse 42, 8001 Zürich" />
                            </div>
                            <button class="btn btn-primary mt-6">Änderungen speichern</button>
                        </div>

                        <div class="card">
                            <h3 class="text-h3 mb-6">Kontaktperson</h3>
                            <div class="settings-form-grid">
                                <div class="form-group">
                                    <label class="form-label">Vorname</label>
                                    <input type="text" class="input" value="Hans" />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Nachname</label>
                                    <input type="text" class="input" value="Müller" />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">E-Mail</label>
                                    <input type="email" class="input" value="hans.mueller@muellerbau.ch" />
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Telefon</label>
                                    <input type="tel" class="input" value="+41 44 123 45 67" />
                                </div>
                            </div>
                            <button class="btn btn-primary mt-6">Änderungen speichern</button>
                        </div>
                    </div>

                    <!-- Notifications Tab -->
                    <div id="settings-notifications" class="settings-panel">
                        <div class="card">
                            <h3 class="text-h3 mb-2">E-Mail-Benachrichtigungen</h3>
                            <p class="text-secondary text-sm mb-6">Wählen Sie, welche E-Mails Sie erhalten möchten.</p>

                            <div class="settings-toggle-list">
                                <div class="settings-toggle-item">
                                    <div>
                                        <div class="font-medium">Neue Ausschreibungen</div>
                                        <div class="text-sm text-secondary">Erhalten Sie eine E-Mail bei neuen passenden Ausschreibungen</div>
                                    </div>
                                    <label class="toggle">
                                        <input type="checkbox" checked />
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="settings-toggle-item">
                                    <div>
                                        <div class="font-medium">Frist-Erinnerungen</div>
                                        <div class="text-sm text-secondary">Erinnerung 3 Tage vor Ablauf der Eingabefrist</div>
                                    </div>
                                    <label class="toggle">
                                        <input type="checkbox" checked />
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="settings-toggle-item">
                                    <div>
                                        <div class="font-medium">Wöchentlicher Digest</div>
                                        <div class="text-sm text-secondary">Zusammenfassung aller neuen Ausschreibungen jeden Montag</div>
                                    </div>
                                    <label class="toggle">
                                        <input type="checkbox" />
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                                <div class="settings-toggle-item">
                                    <div>
                                        <div class="font-medium">Produkt-Updates</div>
                                        <div class="text-sm text-secondary">Neuigkeiten zu neuen Funktionen und Verbesserungen</div>
                                    </div>
                                    <label class="toggle">
                                        <input type="checkbox" checked />
                                        <span class="toggle-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="text-h3 mb-2">Benachrichtigungsfrequenz</h3>
                            <p class="text-secondary text-sm mb-6">Wie oft möchten Sie über neue Ausschreibungen informiert werden?</p>

                            <div class="settings-radio-group">
                                <label class="settings-radio-item">
                                    <input type="radio" name="frequency" value="instant" checked />
                                    <div>
                                        <div class="font-medium">Sofort</div>
                                        <div class="text-sm text-secondary">Bei jeder neuen Ausschreibung</div>
                                    </div>
                                </label>
                                <label class="settings-radio-item">
                                    <input type="radio" name="frequency" value="daily" />
                                    <div>
                                        <div class="font-medium">Täglich</div>
                                        <div class="text-sm text-secondary">Einmal pro Tag um 08:00 Uhr</div>
                                    </div>
                                </label>
                                <label class="settings-radio-item">
                                    <input type="radio" name="frequency" value="weekly" />
                                    <div>
                                        <div class="font-medium">Wöchentlich</div>
                                        <div class="text-sm text-secondary">Jeden Montag um 08:00 Uhr</div>
                                    </div>
                                </label>
                            </div>
                        </div>
                    </div>

                    <!-- Team Tab -->
                    <div id="settings-team" class="settings-panel">
                        <div class="card">
                            <div class="flex justify-between items-center mb-6">
                                <div>
                                    <h3 class="text-h3 mb-1">Teammitglieder</h3>
                                    <p class="text-secondary text-sm">3 von 5 Plätzen belegt</p>
                                </div>
                                <button class="btn btn-primary btn-sm">+ Mitglied einladen</button>
                            </div>

                            <div class="settings-team-list">
                                <div class="settings-team-member">
                                    <div class="settings-avatar">HM</div>
                                    <div class="flex-1">
                                        <div class="font-medium">Hans Müller</div>
                                        <div class="text-sm text-secondary">hans.mueller@muellerbau.ch</div>
                                    </div>
                                    <span class="badge badge-blue">Admin</span>
                                </div>
                                <div class="settings-team-member">
                                    <div class="settings-avatar">AS</div>
                                    <div class="flex-1">
                                        <div class="font-medium">Anna Schmidt</div>
                                        <div class="text-sm text-secondary">anna.schmidt@muellerbau.ch</div>
                                    </div>
                                    <span class="badge badge-gray">Mitglied</span>
                                    <button class="btn btn-ghost btn-sm">Entfernen</button>
                                </div>
                                <div class="settings-team-member">
                                    <div class="settings-avatar">PW</div>
                                    <div class="flex-1">
                                        <div class="font-medium">Peter Weber</div>
                                        <div class="text-sm text-secondary">peter.weber@muellerbau.ch</div>
                                    </div>
                                    <span class="badge badge-gray">Mitglied</span>
                                    <button class="btn btn-ghost btn-sm">Entfernen</button>
                                </div>
                            </div>
                        </div>

                        <div class="card">
                            <h3 class="text-h3 mb-2">Rollen & Berechtigungen</h3>
                            <p class="text-secondary text-sm mb-6">Übersicht der verfügbaren Rollen in Ihrem Team.</p>

                            <div class="settings-roles-list">
                                <div class="settings-role-item">
                                    <div>
                                        <div class="font-medium">Administrator</div>
                                        <div class="text-sm text-secondary">Voller Zugriff auf alle Einstellungen und Teammitglieder</div>
                                    </div>
                                </div>
                                <div class="settings-role-item">
                                    <div>
                                        <div class="font-medium">Mitglied</div>
                                        <div class="text-sm text-secondary">Kann Ausschreibungen ansehen und bearbeiten</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Security Tab -->
                    <div id="settings-security" class="settings-panel">
                        <div class="card">
                            <h3 class="text-h3 mb-2">Passwort ändern</h3>
                            <p class="text-secondary text-sm mb-6">Aktualisieren Sie Ihr Passwort regelmässig für mehr Sicherheit.</p>
                            <div class="form-group">
                                <label class="form-label">Aktuelles Passwort</label>
                                <input type="password" class="input" placeholder="••••••••">
                            </div>
                            <div class="settings-form-grid">
                                <div class="form-group">
                                    <label class="form-label">Neues Passwort</label>
                                    <input type="password" class="input" placeholder="••••••••">
                                </div>
                                <div class="form-group">
                                    <label class="form-label">Passwort bestätigen</label>
                                    <input type="password" class="input" placeholder="••••••••">
                                </div>
                            </div>
                            <button class="btn btn-primary mt-4">Passwort ändern</button>
                        </div>

                        <div class="card">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h3 class="text-h3 mb-2">Zwei-Faktor-Authentifizierung</h3>
                                    <p class="text-secondary text-sm">Schützen Sie Ihr Konto mit einem zusätzlichen Sicherheitscode.</p>
                                </div>
                                <span class="badge badge-gray">Inaktiv</span>
                            </div>
                            <button class="btn btn-secondary mt-6">2FA aktivieren</button>
                        </div>

                        <div class="card">
                            <h3 class="text-h3 mb-2">Suchprofile verwalten</h3>
                            <p class="text-secondary text-sm mb-6">Verwalten oder löschen Sie Ihre Suchprofile.</p>
                            <div class="settings-team-list">
                                <div class="settings-team-member">
                                    <div class="settings-avatar">MB</div>
                                    <div class="flex-1">
                                        <div class="font-medium">Müller Bau AG</div>
                                        <div class="text-sm text-secondary">Erstellt am 15.01.2026</div>
                                    </div>
                                    <button class="btn btn-ghost btn-sm text-error" onclick="alert('Demo: Profil würde gelöscht')">Löschen</button>
                                </div>
                                <div class="settings-team-member">
                                    <div class="settings-avatar">IZ</div>
                                    <div class="flex-1">
                                        <div class="font-medium">Immo Zürich AG</div>
                                        <div class="text-sm text-secondary">Erstellt am 10.01.2026</div>
                                    </div>
                                    <button class="btn btn-ghost btn-sm text-error" onclick="alert('Demo: Profil würde gelöscht')">Löschen</button>
                                </div>
                            </div>
                        </div>

                        <div class="card card-danger">
                            <h3 class="text-h3 mb-2">Gefahrenzone</h3>
                            <p class="text-secondary text-sm mb-6">Diese Aktionen können nicht rückgängig gemacht werden.</p>
                            <div class="flex flex-col gap-4">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <div class="font-medium">Alle Daten exportieren</div>
                                        <div class="text-sm text-secondary">Laden Sie alle Ihre Daten als ZIP-Datei herunter</div>
                                    </div>
                                    <button class="btn btn-secondary btn-sm">Exportieren</button>
                                </div>
                                <div class="flex justify-between items-center divider">
                                    <div>
                                        <div class="font-medium">Konto löschen</div>
                                        <div class="text-sm text-secondary">Ihr Konto und alle Daten werden unwiderruflich gelöscht</div>
                                    </div>
                                    <button class="btn btn-sm btn-danger" onclick="if(confirm('Sind Sie sicher? Diese Aktion kann nicht rückgängig gemacht werden.')) alert('Demo: Konto würde gelöscht')">Konto löschen</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Filter Modal -->
    <div id="modal-filter" class="modal-backdrop" onclick="if(event.target === this) toggleModal('filter', false)">
        <div class="modal">
            <div class="modal-header">
                <h3 class="text-h3">Filter</h3>
                <button class="btn btn-sm btn-ghost" onclick="toggleModal('filter', false)">✕</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label class="form-label">Status</label>
                    <div class="flex flex-col gap-2">
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="filter-status-open" checked> <span>Offen</span>
                        </label>
                        <label class="flex items-center gap-2">
                            <input type="checkbox" id="filter-status-closing" checked> <span>Bald fällig</span>
                        </label>
                    </div>
                </div>
                <div class="form-group">
                    <label class="form-label">Region</label>
                    <select id="filter-region" class="input">
                        <option value="all">Alle Regionen</option>
                        <option value="ZH">Zürich</option>
                        <option value="BE">Bern</option>
                    </select>
                </div>
                <div class="form-group">
                    <label class="form-label">Min. Auftragswert (CHF)</label>
                    <input type="range" class="w-full">
                    <div class="flex justify-between text-sm text-muted">
                        <span>0</span>
                        <span>5 Mio.+</span>
                    </div>
                </div>
                <div class="form-group">
                    <label class="flex items-center gap-2">
                        <input type="checkbox" id="filter-matches-only">
                        <span class="font-medium">Nur hohe Übereinstimmung (>80%)</span>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="toggleModal('filter', false)">Zurücksetzen</button>
                <button class="btn btn-primary" onclick="applyFilters()">Anwenden</button>
            </div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div id="modal-edit" class="modal-backdrop" onclick="if(event.target === this) toggleModal('edit', false)">
        <div class="modal">
            <div class="modal-header">
                <h3 id="modal-edit-title" class="text-h3">Bearbeiten</h3>
                <button class="btn btn-sm btn-ghost" onclick="toggleModal('edit', false)">✕</button>
            </div>
            <div class="modal-body" id="modal-edit-content">
                <!-- Content injected by JS -->
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="toggleModal('edit', false)">Abbrechen</button>
                <button class="btn btn-primary" onclick="saveEdit()">Speichern</button>
            </div>
        </div>
    </div>

    <script type="module" src="js/app.js"></script>
</body>

</html>
